<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DataTables with Flask</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> <!-- Bootstrap CSS -->
    <style>
        .table-container {
            width: 90%;
            margin: auto;
            overflow-x: hidden; /* Hide overflow by default */
        }
        
        @media (max-width: 800px) {
            .table-container {
                width: 100%;
                padding: 0 10px;
                overflow-x: auto; /* Enable horizontal scrolling */
            }
        }

        @media (min-width: 801px) {
            .table-container {
                overflow-x: hidden; /* Ensure overflow is hidden on larger screens */
            }
        }

        /* Ensure DataTable wrapper behaves responsively */
        .dataTables_wrapper {
            width: 100%;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script> <!-- Bootstrap JS including Popper.js -->
</head>
<body>
    <table class="inputs">
        <tr>
            <td>Minimum age:</td>
            <td><input type="text" id="min" name="min"></td>
        </tr>
        <tr>
            <td>Maximum age:</td>
            <td><input type="text" id="max" name="max"></td>
        </tr>
    </table>
    
    <div class="table-container">
        <table id="example" class="table table-striped table-bordered display" style="width:100%"> <!-- Use Bootstrap table classes -->
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Position</th>
                    <th>Office</th>
                    <th>Age</th>
                    <th>Start date</th>
                    <th>Salary</th>
                    <th>Actions</th> <!-- Add Actions column -->
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>

    <script>
        $(document).ready(function() {
            const table = $('#example').DataTable({
                ajax: {
                    url: "{{ url_for('api.get_data') }}",  // Updated URL
                    dataSrc: '',
                    data: function(d) {
                        d.min_age = $('#min').val();
                        d.max_age = $('#max').val();
                    }
                },
                columns: [
                    { data: 'Name' },
                    { data: 'Position' },
                    { data: 'Office' },
                    { data: 'Age' },
                    { data: 'StartDate' },
                    { data: 'Salary' },
                    { // Actions column
                        data: null,
                        className: "dt-center",
                        defaultContent: `
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-expanded="false">
                                    Actions
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <a class="dropdown-item edit-btn" href="#">Edit</a>
                                    <a class="dropdown-item delete-btn" href="#">Delete</a>
                                </div>
                            </div>`
                    }
                ]
            });

            $('#min, #max').on('input', function() {
                table.ajax.reload();
            });

            $('#example tbody').on('click', '.edit-btn', function() {
                const data = table.row($(this).parents('tr')).data();
                // Handle edit action
                alert('Edit entry for ' + data.Name);
            });

            $('#example tbody').on('click', '.delete-btn', function() {
                const data = table.row($(this).parents('tr')).data();
                // Handle delete action
                alert('Delete entry for ' + data.Name);
            });
        });
    </script>
</body>
</html>
  